<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bahmni AI Reporting + DHIS2 Sync</title>
    <link rel="stylesheet" href="/htmls/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="login" id="loginBox">
        <div class="login-card">
            <div style="text-align: right; margin-bottom: -10px;">
                <span style="font-size: 9px; color: #4a5568; background: #ebf8ff; padding: 2px 6px; border-radius: 10px;">v1.1.0-prod</span>
            </div>
            <h2>üîê Bahmni AI Login</h2>
            <p>Accessing Reporting & DHIS2 Sync</p>
            <input id="pwd" type="password" placeholder="Enter administrative password" />
            <button onclick="login()">Enter System</button>
            <p style="font-size: 10px; color: #a0aec0; margin-top: 20px;">
                Developed by <span style="color: #63b3ed;">Dust</span>
            </p>
        </div>
    </div>

    <div id="app" style="display:none; width:100%">
        <div class="sidebar" style="display: flex; flex-direction: column;">
            <button class="new-chat" onclick="newChat()">+ New chat</button>
            
            <div class="sidebar-section-title">
                <i class="fas fa-robot"></i> AI Analysis
            </div>
            <div class="preset" onclick="preset('How many total persons are in the system?')">üë• Total (All Time)</div>
            <div class="preset" onclick="preset('Show the system growth by month')">üìà Monthly Growth</div>
            <div class="preset" onclick="preset('How many patients were registered?')">üìù Registration Count</div>
            <div class="preset" onclick="preset('Show me all appointments.')">üìÖ All RDVs</div>
            <div class="preset" onclick="preset('How many ANC visits were recorded?')">ü§∞ ANC Report</div>
            <div class="preset" onclick="preset('Give me a summary table of vitals.')">üìâ Vitals Summary</div>

            <div class="sidebar-section-title">
                <i class="fas fa-database"></i> Database Reports
            </div>
            <div class="manual-box">
                <div class="preset manual-main" onclick="preset('list')">
                    <i class="fas fa-terminal"></i> Manual Reports
                </div>
                <div class="quick-badges">
                    <span class="badge" onclick="preset('101')">#101 IPD</span>
                    <span class="badge" onclick="preset('102')">#102 Lab</span>
                </div>
            </div>

            <button class="logout-btn" onclick="logout()">Logout</button>

            <div class="sidebar-footer">
                <a href="https://github.com/dustoncloud" target="_blank" class="dev-info">
                    <i class="fab fa-github"></i>
                    <div>
                        <div style="font-weight: bold;">Dust</div>
                        <div style="font-size: 9px;">Open Source Contributor</div>
                    </div>
                </a>
                <div class="license-tag">MIT License</div>
            </div>
        </div>

        <div class="main">
            <div class="date-filter-bar" id="date-filter-bar">
                <div class="date-input-group">
                    <label>Query From</label>
                    <input type="date" id="date-from" value="2026-01-01">
                </div>
                <div class="date-input-group">
                    <label>Query To</label>
                    <input type="date" id="date-to" value="2026-01-31">
                </div>
            </div>

            <div class="sync-log-container" id="sync-status-area">
                <div class="latest-sync-bar">
                    <span id="last-sync-text">
                        <i class="fas fa-history" style="margin-right:8px;"></i> Initializing logs...
                    </span>
                    <button class="view-logs-btn" onclick="toggleLogs()">
                        <i class="fas fa-search"></i> Search History
                    </button>
                </div>
                
                <div id="sync-history-table" style="display: none;">
                    <div class="report-table-wrapper">
                        <table style="width: 100%; border-collapse: collapse;">
                            <thead>
                                <tr style="background: #2d3748; color: #a0aec0; font-size: 11px; text-transform: uppercase;">
                                    <th style="padding: 12px; text-align: left;">Sync Time</th>
                                    <th style="padding: 12px; text-align: left;">Report Type</th>
                                    <th style="padding: 12px; text-align: left;">Target Period</th>
                                    <th style="padding: 12px; text-align: left;">Records</th>
                                </tr>
                            </thead>
                            <tbody id="log-body"></tbody>
                        </table>
                    </div>
                    <div id="log-pagination"></div>
                </div>
            </div>

            <div class="messages" id="messages"></div>
            
            <div class="input-area">
                <textarea id="input" placeholder="Ask Me about medical records..."></textarea>
                <button onclick="sendMessage()">Send</button>
            </div>
        </div>
    </div>

    <script src="/htmls/script.js"></script>
</body>
</html>